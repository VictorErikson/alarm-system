<div class="home">
    <app-header (showUnits)="showUnits()"></app-header>
    <main>
        @switch(currentView()) {
            @case('units') {
                @for(unit of units(); track unit.unitId){
                    <section>
                        <button class="unit" aria-label="Enhet" (click)="showEditUnit(unit)">
                            <div class="top">
                                <h2 class="unitName">{{unit.unitName}}</h2>
                                @if(unit.locked){
                                    <div class="right locked">
                                        <!-- <p>Status: Låst</p> -->
                                        <svg 
                                            xmlns="http://www.w3.org/2000/svg" 
                                            height="36px" 
                                            viewBox="0 -960 960 960" 
                                            width="36px" 
                                            fill="#898989">
                                            <!-- fill="#EB5757"> -->
                                            <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>
                                        </svg>
                                    </div>
                                }@else {
                                    <div class="right">
                                    <!-- <p>Status: Öppet</p> -->
                                        <!-- <svg 
                                            xmlns="http://www.w3.org/2000/svg" 
                                            height="48px" 
                                            viewBox="0 -960 960 960" 
                                            width="40px"
                                            fill="#898989"> 
                                            fill="#4CAF50">
                                            <path d="M240-160h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM240-160v-400 400Zm0 80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h280v-80q0-83 58.5-141.5T720-920q83 0 141.5 58.5T920-720h-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80h120q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Z"/>
                                        </svg> -->
                                        <svg 
                                            xmlns="http://www.w3.org/2000/svg" 
                                            height="36px" 
                                            viewBox="0 -960 960 960" 
                                            width="36px" 
                                            fill="#99A0AE">
                                            <path d="M240-640h360v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85h-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640Zm0 480h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM240-160v-400 400Z"/>
                                        </svg>
                                    </div>
                                }
                            </div>
                            <div class="bottom">
                                @if(unit.unitUsers.length > 0){
                                    <div class="left">
                                        <svg 
                                            class="info-symbol"
                                            xmlns="http://www.w3.org/2000/svg" 
                                            height="24px" 
                                            viewBox="0 -960 960 960" 
                                            width="24px" 
                                            fill="#99A0AE">
                                            <path d="M440-280h80v-240h-80v240Zm40-320q17 0 28.5-11.5T520-640q0-17-11.5-28.5T480-680q-17 0-28.5 11.5T440-640q0 17 11.5 28.5T480-600Zm0 520q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
                                        </svg>
                                        <p>{{unit.unitUsers.length}} användare</p>
                                    </div>
                                }
                                <button class="erase-btn" (mouseenter)="hover = unit.unitName" (mouseleave)="hover = null" (focus)="hover = unit.unitName" (blur)="hover = null">
                                    <svg 
                                        *ngIf="hover === unit.unitName"
                                        class="warning"
                                        xmlns="http://www.w3.org/2000/svg" 
                                        height="20px" 
                                        viewBox="0 -960 960 960" 
                                        width="20px" 
                                        fill="#ffffff">
                                        <path d="M330-120 120-330v-300l210-210h300l210 210v300L630-120H330Zm36-190 114-114 114 114 56-56-114-114 114-114-56-56-114 114-114-114-56 56 114 114-114 114 56 56Zm-2 110h232l164-164v-232L596-760H364L200-596v232l164 164Zm116-280Z"/>
                                    </svg>
                                    <!-- @if(hover !== unit.unitName){
                                        <p>Radera</p>
                                    } -->
                                    <svg 
                                        *ngIf="hover !== unit.unitName"
                                        xmlns="http://www.w3.org/2000/svg" 
                                        height="20px" 
                                        viewBox="0 -960 960 960" 
                                        width="20px" 
                                        fill="#8989895a">
                                        <path d="M280-120q-33 0-56.5-23.5T200-200v-520h-40v-80h200v-40h240v40h200v80h-40v520q0 33-23.5 56.5T680-120H280Zm400-600H280v520h400v-520ZM360-280h80v-360h-80v360Zm160 0h80v-360h-80v360ZM280-720v520-520Z"/>
                                    </svg>
                                    <span class="label" aria-hidden="true">Radera enhet</span>
                                </button>
                            </div>
                        </button>
                    </section>
                }
                <app-add-central-unit (showAddUnit)="showAddUnit()"></app-add-central-unit>
            }
        @case('editUnit') {
            <app-edit-unit 
            (showUnits)="showUnits()"
            (editUser)="showEditUser($event)"
            [unit]="selectedUnit()!">
        </app-edit-unit>
        }
        @case('addUnit') {
            <app-add-unit 
            (showUnits)="showUnits()"
            
            ></app-add-unit>
        }
        @case('editUser') {
            <app-edit-user 
                [user]="selectedUser()!" 
                [unit]="selectedUnit()!"
                (showUnits)="showUnits()"
                (showEditUnit)="showEditUnit($event)">
            </app-edit-user>
        }
    }
    </main>
</div>
