
<div class="editUnitCont">
    <div class="editUnit-popup">
        <svg 
            width="110px" 
            height="110px" 
            viewBox="0 0 5976 4301" 
            version="1.1" 
            xmlns="http://www.w3.org/2000/svg" 
            xmlns:xlink="http://www.w3.org/1999/xlink" 
            xml:space="preserve"
            xmlns:serif="http://www.serif.com/" 
            style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"><g><g transform="matrix(1000,0,0,1000,5985.47,4287.95)"></g><text x="-57.617px" y="4287.95px" style="font-family:'Corbel-Bold', 'Corbel';font-weight:700;font-size:1000px;fill:#fff;">S<tspan x="734.531px 1517.4px 2316.88px 3232.07px 4075px 4565.88px 5351.19px " y="4287.95px 4287.95px 4287.95px 4287.95px 4287.95px 4287.95px 4287.95px ">ECURITY</tspan></text><g><circle cx="970.886" cy="2331.64" r="195.446" style="fill:#3180c3;"/><path d="M970.886,2331.64c663.79,473.329 2363.3,-150.811 2926.68,-622.21c-66.43,210.433 -272.215,529.284 -526.201,817.656c-268.686,305.063 -468.453,449.315 -468.453,449.315c0,-0 -461.811,-389.4 -568.243,-560.763" style="fill:none;stroke:#3180c3;stroke-width:168.27px;"/></g><g><circle cx="4938.9" cy="195.446" r="195.446" style="fill:#4fc9f0;"/><path d="M4931.8,197.469c-441.505,894.048 -1728.05,1640.93 -2873.46,1846.96c-394.853,-673.296 -453.72,-1118.48 -501.55,-1390.74c658.578,-246.507 820.463,-283.299 1265.65,-309.054c566.598,-18.396 1273.01,224.432 1409.14,312.733c-25.754,165.564 -89.935,442.21 -89.935,442.21" 
            style="fill:none;stroke:#4fc9f0;stroke-width:168.27px;"/></g></g>
        </svg>
        <h2>Skapa ny användare</h2>
        <form (ngSubmit)="addUser()">
            <div class="input-section">
                <label for="name" class="label">Namn:</label>
                <div class="input-erase-wrapper">
                    <div class="input-wrapper">
                        <svg 
                            class="icon"
                            xmlns="http://www.w3.org/2000/svg" 
                            height="40px" 
                            viewBox="0 -960 960 960" 
                            width="24px" 
                            fill="#898989">
                            <path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/>
                        </svg>
                        <input type="text" id="name" name="unitName" placeholder="Ange namn">
                    </div>
                </div>
                <label for="name" class="label">Lösenord:</label>
                <div class="input-erase-wrapper">
                    <div class="input-wrapper">
                        <svg 
                            class="icon"
                            xmlns="http://www.w3.org/2000/svg" 
                            height="40px" 
                            viewBox="0 -960 960 960" 
                            width="24px" 
                            fill="#898989">
                            <path d="M240-80q-33 0-56.5-23.5T160-160v-400q0-33 23.5-56.5T240-640h40v-80q0-83 58.5-141.5T480-920q83 0 141.5 58.5T680-720v80h40q33 0 56.5 23.5T800-560v400q0 33-23.5 56.5T720-80H240Zm0-80h480v-400H240v400Zm240-120q33 0 56.5-23.5T560-360q0-33-23.5-56.5T480-440q-33 0-56.5 23.5T400-360q0 33 23.5 56.5T480-280ZM360-640h240v-80q0-50-35-85t-85-35q-50 0-85 35t-35 85v80ZM240-160v-400 400Z"/>
                        </svg>
                        <input [type]="showPassword ? 'text' : 'password'" id="password" name="unitPass" placeholder="Ange lösenord" [(ngModel)]="enteredPass">
                        <button class="passwordBtn" type="button" (click)="showPassword = !showPassword" aria-label="Växla lösenords synlighet">
                            @if(showPassword){
                                <svg 
                                class="eye"
                                xmlns="http://www.w3.org/2000/svg" 
                                height="20px" 
                                viewBox="0 -960 960 960" 
                                width="20px" 
                                fill="#898989">
                                <path d="m644-428-58-58q9-47-27-88t-93-32l-58-58q17-8 34.5-12t37.5-4q75 0 127.5 52.5T660-500q0 20-4 37.5T644-428Zm128 126-58-56q38-29 67.5-63.5T832-500q-50-101-143.5-160.5T480-720q-29 0-57 4t-55 12l-62-62q41-17 84-25.5t90-8.5q151 0 269 83.5T920-500q-23 59-60.5 109.5T772-302Zm20 246L624-222q-35 11-70.5 16.5T480-200q-151 0-269-83.5T40-500q21-53 53-98.5t73-81.5L56-792l56-56 736 736-56 56ZM222-624q-29 26-53 57t-41 67q50 101 143.5 160.5T480-280q20 0 39-2.5t39-5.5l-36-38q-11 3-21 4.5t-21 1.5q-75 0-127.5-52.5T300-500q0-11 1.5-21t4.5-21l-84-82Zm319 93Zm-151 75Z"/>
                            </svg>
                        }@else {
                            <svg 
                                class="eye"
                                xmlns="http://www.w3.org/2000/svg" 
                                height="20px" 
                                viewBox="0 -960 960 960" 
                                width="20px" 
                                fill="#898989">
                                <path d="M480-320q75 0 127.5-52.5T660-500q0-75-52.5-127.5T480-680q-75 0-127.5 52.5T300-500q0 75 52.5 127.5T480-320Zm0-72q-45 0-76.5-31.5T372-500q0-45 31.5-76.5T480-608q45 0 76.5 31.5T588-500q0 45-31.5 76.5T480-392Zm0 192q-146 0-266-81.5T40-500q54-137 174-218.5T480-800q146 0 266 81.5T920-500q-54 137-174 218.5T480-200Zm0-300Zm0 220q113 0 207.5-59.5T832-500q-50-101-144.5-160.5T480-720q-113 0-207.5 59.5T128-500q50 101 144.5 160.5T480-280Z"/>
                            </svg>
                            }
                        </button>
                    </div>
                </div>
                <label for="tag" class="label">Tagg:</label>
                <div class="input-erase-wrapper">
                    <div class="input-wrapper">
                        <svg 
                            class="icon"
                            xmlns="http://www.w3.org/2000/svg" 
                            height="40px" 
                            viewBox="0 -960 960 960" 
                            width="24px" 
                            fill="#898989">
                            <path d="M856-390 570-104q-12 12-27 18t-30 6q-15 0-30-6t-27-18L103-457q-11-11-17-25.5T80-513v-287q0-33 23.5-56.5T160-880h287q16 0 31 6.5t26 17.5l352 353q12 12 17.5 27t5.5 30q0 15-5.5 29.5T856-390ZM513-160l286-286-353-354H160v286l353 354ZM260-640q25 0 42.5-17.5T320-700q0-25-17.5-42.5T260-760q-25 0-42.5 17.5T200-700q0 25 17.5 42.5T260-640Zm220 160Z"/>
                        </svg>
                        <input type="text" id="name" name="unitName" placeholder="Ange tagg-id">
                    </div>
                </div>
                <div class="avatar-dropdown">
                    <button type="button" (click)="toggleDropdown()" class="dropdown-toggle" aria-label="Välj avatar">
                        <svg-avatar class="avatar-component" [id]="selectedAvatar"></svg-avatar>
                        Avatar
                        <svg 
                            class="dropdown-symbol"
                            *ngIf="!dropdownOpen"
                            xmlns="http://www.w3.org/2000/svg" 
                            height="24px" 
                            viewBox="0 -960 960 960" 
                            fill="currentColor"
                            width="24px">
                            <path d="M480-344 240-584l56-56 184 184 184-184 56 56-240 240Z"/>
                        </svg>
                        <svg 
                            class="dropdown-symbol"
                            *ngIf="dropdownOpen"
                            xmlns="http://www.w3.org/2000/svg" 
                            height="24px" 
                            fill="currentColor"
                            viewBox="0 -960 960 960" 
                            width="24px">
                            <path d="M480-528 296-344l-56-56 240-240 240 240-56 56-184-184Z"/>
                        </svg>
                    </button>

                    <ul class="dropdown-list" *ngIf="dropdownOpen">
                        @for (avatar of avatars; track avatar.value) {
                            @if (avatar.value !== selectedAvatar){
                                <li (click)="selectAvatar(avatar.value)">
                                    <svg-avatar [id]="avatar.value"></svg-avatar>
                                </li>
                            }
                        }
 
                    </ul>
                </div>
                
            </div>
            

            
            @if(editUserFailed()){
                <p class="error-msg">
                    Ändring misslyckades, var vänlig försök igen.
                </p>
            }
            <div class="buttons">
                <button class="add" type="submit" >Spara</button>
                <button class="cancel" type="button" (click)="returnToUnit()">Avbryt</button>
            </div>
        </form>
    </div>
</div>